pipeline {
    agent any
    stages {    
        stage ('Checkout') {
            steps {
                checkout scm
              }
            }          

        stage('Version node') {
            steps {
               echo "Version node"
               bat "node -v"
            }
        }
        stage('Install Newman') {
            steps {
                echo "install newman"
                bat "npm install newman"
                echo "install reporter htmlextra"
                bat "npm install newman-reporter-htmlextra"
            }
        }
        stage('Tests') {
            steps {
                 echo "Run tests"
                 bat "newman run postman/test.postman_collection.json"

            }
        }

    }
}
