pipeline {
  agent any
  stages {
    stage('Clean Workspace'){
      steps {
        cleanWs()
      }
    }
    stage ('Checkout') {
      steps {
        checkout scm
      }
    }          
    stage('Testing...') {
    agent{
        docker{image 'postman/newman@1.0.0'}
      }
      steps{
      npm install newman
      npm install newman-reporter-htmlextra
      npx newman run "postman/test.postman_collection.json" -r cli,htmlextra,junit  --folder "Reports" --reporter-htmlextra-export newman/report.html  --reporter-junit-export newman/report.xml
      }
    }
  }
}
